/*
 * O3 World Holiday Microsite 2013
 * 
 * Custom Vanilla Javascript and jQuery Functions
 *  
 * Changelog:
 * 
 ************************************************************************************************/// avoid Console errors in browsers that lack a console... I'm looking at you IE
function initPreloader(){reload();loadAll()}function reload(){preload!=null&&preload.close();preload=new createjs.LoadQueue(!1);preload.addEventListener("error",handleFileError);preload.addEventListener("progress",handleOverallProgress);preload.setMaxConnections(5);manifest=theImages}function loadAll(){while(manifest.length>0)loadAnother()}function loadAnother(){var e=manifest.shift();preload.loadFile(e)}function handleOverallProgress(e){if(preload.progress==1){s=skrollr.init({forceHeight:!0,smoothScrolling:!0,easing:{vibrate:function(e){return Math.sin(e*10*Math.PI)}},render:function(e){currST=0}});setTimeout(function(){jQuery("#preload-container").fadeOut("slow")},500)}}function handleFileError(e){console.log("error loading asset")}function calculateParallaxData(){jQuery(parallaxBG).attr("data-0","right:-"+(jQuery(parallaxBG).width()-jQuery(window).width())/3+"px;");jQuery(parallaxMG).attr("data-0","right:-"+(jQuery(parallaxMG).width()-jQuery(window).width())+"px;")}function moveScene(e){scrollInterval=setInterval(function(){jQuery(window).scrollTop(jQuery(window).scrollTop()+ -(e*50))},100)}(!window.console||!console.log)&&function(){var e=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],n=t.length,r=window.console={};while(n--)r[t[n]]=e}();var N=navigator.appName,ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);M&&(tem=ua.match(/version\/([\.\d]+)/i))!=null&&(M[2]=tem[1]);M=M?[M[1],M[2]]:[N,navigator.appVersion,"-?"];var waitForFinalEvent=function(){var e={};return function(t,n,r){r||(r="Don't call this twice without a uniqueId");e[r]&&clearTimeout(e[r]);e[r]=setTimeout(t,n)}}(),preload,loadallfired=!1,manifest=new Array;if(window.devicePixelRatio>=1.5)var theImages=["images/bg-back-1@2x.png","images/bg-back-2@2x.png","images/bg-back-3@2x.png","images/bg-back-4@2x.png","images/bg-mid-1@2x.png","images/bg-mid-2@2x.png","images/bg-mid-3@2x.png","images/bg-mid-4@2x.png","images/bg-mid-5@2x.png","images/bg-mid-6@2x.png","images/bg-mid-7@2x.png","images/bg-mid-8@2x.png","images/bg-mid-9@2x.png","images/bkg-panel@2x.png","images/bkg-snow-foreground@2x.png","images/bkg-snow-midground@2x.png","images/sprite-clouds@2x.png","images/sprite-people@2x.png","images/sprite-social@2x.png","images/midground-elem-1@2x.png","images/midground-elem-2@2x.png","images/midground-elem-3@2x.png","images/midground-elem-4@2x.png","images/midground-elem-5@2x.png","images/midground-elem-6@2x.png","images/midground-elem-7@2x.png","images/touch-divider@2x.gif"];else var theImages=["images/bg-back-1.png","images/bg-back-2.png","images/bg-back-3.png","images/bg-back-4.png","images/bg-mid-1.png","images/bg-mid-2.png","images/bg-mid-3.png","images/bg-mid-4.png","images/bg-mid-5.png","images/bg-mid-6.png","images/bg-mid-7.png","images/bg-mid-8.png","images/bg-mid-9.png","images/bkg-panel.png","images/bkg-snow-foreground.png","images/bkg-snow-midground.png","images/sprite-clouds.png","images/sprite-people.png","images/sprite-social.png","images/midground-elem-1.png","images/midground-elem-2.png","images/midground-elem-3.png","images/midground-elem-4.png","images/midground-elem-5.png","images/midground-elem-6.png","images/midground-elem-7.png","images/touch-divider.gif"];var s,parallaxBG=jQuery("#bg-1"),parallaxMG=jQuery("#bg-2, #bg-panels"),scrollInterval=100;jQuery("#scrollRight").bind("touchstart mousedown",function(){clearInterval(scrollInterval);moveScene(-1)});jQuery("#scrollRight").bind("touchend mouseup",function(){clearInterval(scrollInterval)});jQuery("#scrollLeft").bind("touchstart mousedown",function(){clearInterval(scrollInterval);moveScene(1)});jQuery("#scrollLeft").bind("touchend mouseup",function(){clearInterval(scrollInterval)});jQuery(window).resize(function(){waitForFinalEvent(function(){calculateParallaxData();s.refresh()},500,"some unique string")});